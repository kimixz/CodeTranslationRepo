[
    {
        "method_name": "run",
        "method_code": "@NextcloudServer(max = 18)\n    protected RemoteOperationResult run(OwnCloudClient client) {\n        RemoteOperationResult result;\n        Utf8PostMethod postMethod = null;\n\n        try {\n            postMethod = new Utf8PostMethod(client.getBaseUri() + DOCUMENT_URL + JSON_FORMAT);\n            postMethod.setParameter(FILE_ID, String.valueOf(fileId));\n\n            // remote request\n            postMethod.addRequestHeader(OCS_API_HEADER, OCS_API_HEADER_VALUE);\n\n            int status = client.executeMethod(postMethod, SYNC_READ_TIMEOUT, SYNC_CONNECTION_TIMEOUT);\n\n            if (status == HttpStatus.SC_OK) {\n                String response = postMethod.getResponseBodyAsString();\n\n                // Parse the response\n                JSONObject respJSON = new JSONObject(response);\n                String url = respJSON.getJSONObject(NODE_OCS).getJSONObject(NODE_DATA).getString(NODE_URL);\n\n                result = new RemoteOperationResult(true, postMethod);\n                result.setSingleData(url);\n            } else {\n                result = new RemoteOperationResult(false, postMethod);\n                client.exhaustResponse(postMethod.getResponseBodyAsStream());\n            }\n        } catch (Exception e) {\n            result = new RemoteOperationResult(e);\n            Log_OC.e(TAG, \"Get rich document url for file with id \" + fileId + \" failed: \" + result.getLogMessage(),\n                     result.getException());\n        } finally {\n            if (postMethod != null) {\n                postMethod.releaseConnection();\n            }\n        }\n        return result;\n    }",
        "prompt": "\n        Please translate the following Java (Android) method titled run from RichDocumentsUrlOperation.java into Swift.\n\n        Input:\n\n        Method Name: run\n\n        Method Code: @NextcloudServer(max = 18)\n    protected RemoteOperationResult run(OwnCloudClient client) {\n        RemoteOperationResult result;\n        Utf8PostMethod postMethod = null;\n\n        try {\n            postMethod = new Utf8PostMethod(client.getBaseUri() + DOCUMENT_URL + JSON_FORMAT);\n            postMethod.setParameter(FILE_ID, String.valueOf(fileId));\n\n            // remote request\n            postMethod.addRequestHeader(OCS_API_HEADER, OCS_API_HEADER_VALUE);\n\n            int status = client.executeMethod(postMethod, SYNC_READ_TIMEOUT, SYNC_CONNECTION_TIMEOUT);\n\n            if (status == HttpStatus.SC_OK) {\n                String response = postMethod.getResponseBodyAsString();\n\n                // Parse the response\n                JSONObject respJSON = new JSONObject(response);\n                String url = respJSON.getJSONObject(NODE_OCS).getJSONObject(NODE_DATA).getString(NODE_URL);\n\n                result = new RemoteOperationResult(true, postMethod);\n                result.setSingleData(url);\n            } else {\n                result = new RemoteOperationResult(false, postMethod);\n                client.exhaustResponse(postMethod.getResponseBodyAsStream());\n            }\n        } catch (Exception e) {\n            result = new RemoteOperationResult(e);\n            Log_OC.e(TAG, \"Get rich document url for file with id \" + fileId + \" failed: \" + result.getLogMessage(),\n                     result.getException());\n        } finally {\n            if (postMethod != null) {\n                postMethod.releaseConnection();\n            }\n        }\n        return result;\n    }\n\n        Abstract Syntax Tree: AST not available\n\n        Output Requirement: Return only the translated Swift code. No additional details, explanation, or formatting is required.\n        ",
        "translateMethod": "```swift\n@NextcloudServer(max: 18)\nfunc run(client: OwnCloudClient) -> RemoteOperationResult {\n    var result: RemoteOperationResult\n    var postMethod: Utf8PostMethod? = nil\n\n    do {\n        postMethod = Utf8PostMethod(url: client.baseUri + DOCUMENT_URL + JSON_FORMAT)\n        postMethod?.setParameter(name: FILE_ID, value: String(fileId))\n\n        // remote request\n        postMethod?.addRequestHeader(name: OCS_API_HEADER, value: OCS_API_HEADER_VALUE)\n\n        let status = try client.executeMethod(postMethod!, readTimeout: SYNC_READ_TIMEOUT, connectionTimeout: SYNC_CONNECTION_TIMEOUT)\n\n        if status == HttpStatus.SC_OK {\n            if let response = postMethod?.getResponseBodyAsString() {\n                // Parse the response\n                let respJSON = try JSONSerialization.jsonObject(with: Data(response.utf8), options: []) as! [String: Any]\n                let url = ((respJSON[NODE_OCS] as! [String: Any])[NODE_DATA] as! [String: Any])[NODE_URL] as! String\n\n                result = RemoteOperationResult(success: true, method: postMethod)\n                result.setSingleData(url)\n            } else {\n                result = RemoteOperationResult(success: false, method: postMethod)\n            }\n        } else {\n            result = RemoteOperationResult(success: false, method: postMethod)\n            client.exhaustResponse(postMethod?.getResponseBodyAsStream())\n        }\n    } catch {\n        result = RemoteOperationResult(error: error)\n        Log_OC.e(TAG, \"Get rich document url for file with id \\(fileId) failed: \\(result.getLogMessage())\", result.getException())\n    } finally {\n        postMethod?.releaseConnection()\n    }\n    return result\n}\n```"
    }
]